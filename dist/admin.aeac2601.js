async function e(e){let t=await fetch("https://backend-yzf1.onrender.com/api/menu",{method:"GET",headers:{Authorization:`Bearer ${e}`}});t.ok?function(e){let t=document.getElementById("menuItems");t.innerHTML="",e.forEach(e=>{let n=document.createElement("div");n.id=`menuItem-${e._id}`,n.classList.add("menu-item-div"),n.innerHTML=`
            <h3>${e.name}</h3>
            <p>${e.description}</p>
            <button class='edit-buttons' onclick="editMenuItem('${e._id}')">Uppdatera</button>
            <button class='delete-buttons' onclick="deleteMenuItem('${e._id}')">Ta bort</button>
        `,t.appendChild(n)})}(await t.json()):console.error("Failed to fetch menu items:",t.status)}async function t(e){let t=await fetch("https://backend-yzf1.onrender.com/api/bookings",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});t.ok?function(e){let t=document.getElementById("bookings");t.innerHTML="",e.forEach(e=>{let n=document.createElement("div");n.classList.add("booking-item-div"),n.id=`booking-${e._id}`;let o=new Date(e.date).toLocaleDateString("sv-SE");n.innerHTML=`
            <h3>Bokning f\xf6r ${e.name}</h3>
            <p>E-mail: ${e.email}</p>
            <p>Phone: ${e.phone}</p>
            <p>Datum: ${o}</p>
            <p>Tid: ${e.time}</p>
            <p>G\xe4ster: ${e.guests}</p>
            <p>Speciella \xf6nskem\xe5l: ${e.specialRequests}</p>
             <button class='edit-buttons' onclick="editBooking('${e._id}')">Uppdatera</button>
            <button class='delete-buttons' onclick="deleteBooking('${e._id}')">Ta bort</button>
        `,t.appendChild(n)})}(await t.json()):console.error("Failed to fetch bookings:",t.status)}function n(e,t=!0){let o=document.getElementById("notification");o.style.backgroundColor=t?"#4CAF50":"#f44336",o.textContent=e,o.style.display="block",setTimeout(()=>{o.style.display="none"},3e3)}document.addEventListener("DOMContentLoaded",()=>{let n=localStorage.getItem("token");console.log(n),n||(window.location.href="/login.html"),e(n),t(n),document.getElementById("logoutButton").addEventListener("click",()=>{localStorage.removeItem("token"),window.location.href="/login.html"})}),document.getElementById("addNewItemButton").addEventListener("click",()=>{document.getElementById("menuFormContainer").style.display="block",document.getElementById("menuForm").reset(),document.getElementById("menuId").value=""}),document.getElementById("addNewBookingButton").addEventListener("click",()=>{document.getElementById("bookingFormContainer").style.display="block",document.getElementById("bookingForm").reset(),document.getElementById("bookingId").value=""}),document.getElementById("menuForm").addEventListener("submit",async t=>{t.preventDefault();let o=document.getElementById("menuId").value,d=document.getElementById("name").value,a=document.getElementById("description").value,l=document.getElementById("category").value,i=localStorage.getItem("token"),m="https://backend-yzf1.onrender.com/api/menu",c="POST";o&&(m+=`/${o}`,c="PUT");let s=await fetch(m,{method:c,headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({name:d,description:a,category:l})});s.ok?(e(i),document.getElementById("menuFormContainer").style.display="none",n(o?`${d} har uppdaterats!`:`${d} har lagts till!`)):console.error("Failed to save menu item:",s.status)}),document.getElementById("bookingForm").addEventListener("submit",async e=>{e.preventDefault();let o=document.getElementById("bookingId").value,d=document.getElementById("bookingName").value,a=document.getElementById("bookingPhone").value,l=document.getElementById("bookingEmail").value,i=document.getElementById("bookingDate").value,m=document.getElementById("bookingTime").value,c=document.getElementById("bookingGuests").value,s=document.getElementById("bookingSpecialRequests").value,u=localStorage.getItem("token"),r=new Date(`${i}T${m}:00Z`).toISOString();console.log(r);let g={name:d,phone:a,email:l,date:r,time:m,guests:c,specialRequests:s};console.log(g);let y="https://backend-yzf1.onrender.com/api/bookings",p="POST";o&&(y+=`/${o}`,p="PUT");let k=await fetch(y,{method:p,headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify(g)});if(k.ok)t(u),document.getElementById("bookingFormContainer").style.display="none",n(o?"Booking updated successfully!":"New booking added!");else{let e=await k.json();console.error("Failed to save booking:",k.status),console.error("Error details:",e)}}),document.getElementById("cancelButton").addEventListener("click",()=>{document.getElementById("menuFormContainer").style.display="none"}),document.getElementById("cancelBookingButton").addEventListener("click",()=>{document.getElementById("bookingFormContainer").style.display="none"});
//# sourceMappingURL=admin.aeac2601.js.map
